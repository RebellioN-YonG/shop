import{_ as L,b as k,r as s,S as A,d as B,o as N,c as S,a as m,w,N as O,B as R}from"./index-786b1c77.js";import{L as U}from"./index-fdda10ed.js";import"./index-ea81e4d8.js";import"./index-2de2f4d6.js";import"./index-0611bba7.js";import"./index-34579d66.js";import"./index-6e9a7553.js";import{A as D}from"./index-b2e1e4b1.js";import{g as V}from"./address-6ade57a6.js";import"./use-tab-status-ab1aea8b.js";const $={class:"container"},v=10,E={__name:"index",setup(J){const n=k(),a=s(null);n.query.orderInfo&&(a.value=JSON.parse(decodeURI(atob(n.query.orderInfo||"")||"")||"{}")),console.log(a.value);let l=1,r=0;const d=A(),g=s([]),i=s([]),u=s(null),h=(e,t)=>{console.log(e),d.push({path:"/edit-address",query:{addressInfo:btoa(encodeURI(JSON.stringify({...g.value[t]}))),orderInfo:n.query.orderInfo}})},I=s(!1),y=s(!1),b=async()=>{var t,c,p,f,_;const e=await V({page:l++,limit:v});if(console.log(e),console.table(e.data.list),e.code===0&&(r=e.data.total,console.log(e.data.list===null),I.value=!1,e.data.list!==null&&(g.value.push(...e.data.list||[]),i.value.push(...((c=(t=e.data.list)==null?void 0:t.map)==null?void 0:c.call(t,o=>({id:o.id,name:o.name,tel:o.phone,address:(o.province||"")+(o.city||"")+(o.town||"")+(o.street&&o.street!=="null"?o.street:"")+(o.detail||""),isDefault:!!o.is_default})))||[]),u.value=(_=(f=(p=i.value).find)==null?void 0:f.call(p,o=>o.isDefault))==null?void 0:_.id,console.table(g.value),console.table(i.value))),console.log(l,parseInt(r/v)+1,r,l,v),l>parseInt(r/v)+1){y.value=!0;return}},x=e=>{a.value&&(console.log(e),console.log(u.value),d.replace({name:"createOrder",query:{orderInfo:btoa(encodeURI(JSON.stringify({...a.value,consignee_name:e.name,consignee_phone:e.tel,consignee_address:e.address,isDefault:e.isDefault})))}}))},q=()=>{a.value?d.replace({name:"createOrder",query:{orderInfo:n.query.orderInfo}}):d.push("/user")};return B(()=>{b()}),(e,t)=>{const c=O,p=D,f=U,_=R;return N(),S("div",$,[m(c,{title:e.$route.meta.title,placeholder:"",fixed:"","left-arrow":"",onClickLeft:q},null,8,["title"]),m(f,{loading:I.value,"onUpdate:loading":t[2]||(t[2]=o=>I.value=o),finished:y.value,"immediate-check":!1,onLoad:b,"finished-text":"没有更多了",offset:""},{default:w(()=>[m(p,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=o=>u.value=o),list:i.value,"default-tag-text":"默认",onAdd:t[1]||(t[1]=o=>e.$router.push({path:"/edit-address",query:{orderInfo:e.$route.query.orderInfo}})),onEdit:h,onSelect:x},null,8,["modelValue","list"])]),_:1},8,["loading","finished"]),m(_,{right:"20px",bottom:"60px"})])}}},Q=L(E,[["__scopeId","data-v-5c65ebbd"]]);export{Q as default};
