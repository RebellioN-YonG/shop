import{h,m as I,i as x,a3 as y,a as u,G as g,a4 as S,a5 as _,n as P,a6 as N,a7 as $,a8 as V,x as B,a9 as E,aa as w,k as R,I as U,S as G,ab as O,r as b,d as j,ac as f,o as q,V as D,u as K}from"./index-786b1c77.js";const[A,M]=h("sidebar"),C=Symbol(A),T={modelValue:I(0)};var Y=x({name:A,props:T,emits:["change","update:modelValue"],setup(a,{emit:r,slots:s}){const{linkChildren:o}=y(C),n=()=>+a.modelValue;return o({getActive:n,setActive:d=>{d!==n()&&(r("update:modelValue",d),r("change",d))}}),()=>{var d;return u("div",{role:"tablist",class:M()},[(d=s.default)==null?void 0:d.call(s)])}}});const z=g(Y),[F,k]=h("sidebar-item"),H=S({},_,{dot:Boolean,title:String,badge:P,disabled:Boolean,badgeProps:Object});var J=x({name:F,props:H,emits:["click"],setup(a,{emit:r,slots:s}){const o=N(),{parent:n,index:v}=$(C);if(!n)return;const d=()=>{a.disabled||(r("click",v.value),n.setActive(v.value),o())};return()=>{const{dot:i,badge:l,title:e,disabled:t}=a,c=v.value===n.getActive();return u("div",{role:"tab",class:k({select:c,disabled:t}),tabindex:t?void 0:0,"aria-selected":c,onClick:d},[u(V,B({dot:i,class:k("text"),content:l},a.badgeProps),{default:()=>[s.title?s.title():e]})])}}});const L=g(J),[Q,m]=h("tree-select"),W={max:I(1/0),items:E(),height:I(300),selectedIcon:w("success"),mainActiveIndex:I(0),activeId:{type:[Number,String,Array],default:0}};var X=x({name:Q,props:W,emits:["clickNav","clickItem","update:activeId","update:mainActiveIndex"],setup(a,{emit:r,slots:s}){const o=e=>Array.isArray(a.activeId)?a.activeId.includes(e):a.activeId===e,n=e=>{const t=()=>{if(e.disabled)return;let c;if(Array.isArray(a.activeId)){c=a.activeId.slice();const p=c.indexOf(e.id);p!==-1?c.splice(p,1):c.length<+a.max&&c.push(e.id)}else c=e.id;r("update:activeId",c),r("clickItem",e)};return u("div",{key:e.id,class:["van-ellipsis",m("item",{active:o(e.id),disabled:e.disabled})],onClick:t},[e.text,o(e.id)&&u(U,{name:a.selectedIcon,class:m("selected")},null)])},v=e=>{r("update:mainActiveIndex",e)},d=e=>r("clickNav",e),i=()=>{const e=a.items.map(t=>u(L,{dot:t.dot,badge:t.badge,class:[m("nav-item"),t.className],disabled:t.disabled,onClick:d},{title:()=>s["nav-text"]?s["nav-text"](t):t.text}));return u(z,{class:m("nav"),modelValue:a.mainActiveIndex,onChange:v},{default:()=>[e]})},l=()=>{if(s.content)return s.content();const e=a.items[+a.mainActiveIndex]||{};if(e.children)return e.children.map(n)};return()=>u("div",{class:m(),style:{height:R(a.height)}},[i(),u("div",{class:m("content")},[l()])])}});const Z=g(X);const te={__name:"index2",setup(a){const r=G();O();const s=b(1),o=b(0);let n=b([]);function v(i){r.push({path:"/category",query:{id:i.id}})}console.log(n.value);async function d(i){let l=n.value[i].id,e=await f(l),t=[];e.data.list.forEach(c=>{t.push({text:c.name,id:c.id})}),n.value[i].children=t}return j(async()=>{let i=await f(0);if(console.log(i),i.data.total>0){let l=await f(i.data.list[0].id);i.data.list.forEach(t=>{n.value.push({text:t.name,children:[],id:t.id})});let e=[];l.data.list.forEach(t=>{e.push({text:t.name,id:t.id})}),n.value[0].children=e}}),(i,l)=>{const e=Z;return q(),D(e,{style:{height:"100%"},"active-id":s.value,"onUpdate:activeId":l[0]||(l[0]=t=>s.value=t),"main-active-index":o.value,"onUpdate:mainActiveIndex":l[1]||(l[1]=t=>o.value=t),items:K(n),onClickNav:d,onClickItem:v},null,8,["active-id","main-active-index","items"])}}};export{te as default};
