import{aP as $,aQ as S,_ as E,aR as L,b as z,S as A,r as l,d as M,j as O,o as r,c as d,a as u,f as t,a0 as _,Y as G,Z as H,$ as Q,w as Y,ar as D,aS as Z,aT as J,N as K,aU as W,I as X,aq as ee}from"./index-786b1c77.js";import"./index-2de2f4d6.js";import{F as oe}from"./index-9ab1ad7c.js";import{a as T}from"./recommend-b3934d0d.js";import{d as te,a as ae}from"./cattle-8f9d9a4d.js";import"./use-id-75d822c1.js";const se=m=>$({method:"GET",url:"/frontend/comment/list/".concat("?",S(m))}),le=m=>$({method:"POST",url:"/frontend/comment/add/",data:(()=>{const n=new FormData;return Object.keys(m).forEach(w=>{n.append(w,m[w])}),n})()});const ne={class:"container"},ce={class:"content"},ie={class:"body"},re={class:"title"},de={class:"info"},ue={class:"desc"},_e={class:"created_time"},ve={class:"detail"},pe={class:"comment"},me={key:0},fe=["onClick"],ge={class:"item_left"},he={class:"user_name"},ye={key:0},be={key:1},we={class:"createdTime"},Ce={class:"user_content"},xe={key:1,class:"no_comments"},ke={class:"action_box"},Te={class:"action"},Ie={class:"comment_header"},je={__name:"Detail",setup(m){L(e=>({"380fb2a6":N.value}));const n=z(),w=A(),v=n.query.articleId,k=l(0);n.query.articleId&&(k.value=parseInt(n.query.articleId),console.log(k.value)),console.log(n.query),v||w.replace("/recommend");const a=l({}),c=l([]),C=l(0),f=l(""),I=async()=>{if(!v)return;const e=await T(v);console.log(e),e.code===0&&(a.value=e.data),console.table(a.value)},j=async()=>{if(!v)return;const o=(await se({type:2,object_id:k.value,size:20,page:1})).data.list||[];c.value=o,c.value=c.value.map(p=>{if(p.parent_id!==0){const x=c.value.find(b=>b.id===p.parent_id);x&&(p.replyTo=x.user_name)}return p}),console.table(c.value)},q=()=>{y.value=!0,C.value=0,f.value=""};M(async()=>{await I(),g.value=a.value.is_praise,h.value=a.value.is_collect,await j()});const g=l(!1),V=async()=>{try{if(g.value){const o=await te({type:2,object_id:a.value.id});console.log(o),console.log("ðŸ˜“")}else{const o=await ae({type:2,object_id:a.value.id});console.log(o),console.log("ðŸ‘")}const e=await T(v);console.log(e),a.value.praise=e.data.praise,g.value=a.value.is_praise=e.data.is_praise}catch(e){console.error("ç‚¹èµžæ“ä½œå¤±è´¥:",e),D("æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•")}},h=l(!1),B=async()=>{try{if(h.value){const o=await Z({type:2,object_id:a.value.id});console.log(o),console.log("ðŸ’”")}else{const o=await J({type:2,object_id:a.value.id});console.log(o),console.log("ðŸ’–")}const e=await T(v);console.log(e),a.value.collection=e.data.collection,h.value=a.value.is_collect=e.data.is_collect}catch(e){console.error("æ”¶è—æ“ä½œå¤±è´¥:",e),D("æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•")}},y=l(!1),i=l(""),N=O(()=>i.value.length>0?"#2ecc71":"#ccc"),R=async()=>{if(!i.value.length)return;console.log(i.value);const e=await le({type:2,object_id:a.value.id,content:i.value,parent_id:C.value});console.log(e),y.value=!1,i.value="",C.value=0,f.value="",I(),j()},U=(e,o)=>{C.value=e,f.value="åŒ¿åç”¨æˆ·",y.value=!0};return(e,o)=>{const p=K,x=W,b=X,F=oe,P=ee;return r(),d("div",ne,[u(p,{title:e.$route.meta.title,placeholder:"",fixed:"","left-arrow":"",onClickLeft:o[0]||(o[0]=s=>e.$router.back())},null,8,["title"]),t("div",ce,[u(x,{class:"img",fit:"cover",src:a.value.pic_url},null,8,["src"]),t("div",ie,[t("p",re,_(a.value.title),1),t("div",de,[t("p",ue,_(a.value.desc),1),t("p",_e,_(a.value.created_at),1)]),t("div",ve,_(a.value.detail),1)])]),t("div",pe,[o[4]||(o[4]=t("p",null,"è¯„è®º:",-1)),c.value.length>0?(r(),d("div",me,[(r(!0),d(G,null,H(c.value,s=>(r(),d("div",{class:"content_item",key:s.id,onClick:De=>U(s.id,s.user_name)},[o[3]||(o[3]=t("div",{class:"user_pic"},[t("img",{src:"https://img.aigexing.com/uploads/7/1253/1120051754/9302649767/23368895.jpg"})],-1)),t("div",ge,[t("div",he,[s.parent_id===0?(r(),d("span",ye," åŒ¿åç”¨æˆ· ")):(r(),d("span",be,"åŒ¿åç”¨æˆ· å›žå¤ åŒ¿åç”¨æˆ·")),t("span",we,_(s.created_at),1)]),t("div",Ce,_(s.content),1)])],8,fe))),128))])):(r(),d("div",xe," è¿˜æ²¡æœ‰äººè¯„è®ºï¼Œå¿«æ¥æŠ¢æ²™å‘å§ï¼ "))]),t("div",ke,[t("div",{class:"add_comment",onClick:q},[u(b,{name:"edit",size:"20px"}),o[5]||(o[5]=Q("Â è¯„è®º "))]),t("div",Te,[t("div",{class:"Thumbs_action",onClick:V},[u(b,{color:g.value?"#3498db":"#767676",name:`thumb-circle${g.value?"":"-o"}`,badge:a.value.praise||"","badge-props":{offset:["10px","5px"]}},null,8,["color","name","badge"])]),t("div",{class:"star_action",onClick:B},[u(b,{color:h.value?"#f39c12":"#767676",badge:a.value.collection||"",name:`star${h.value?"":"-o"}`,"badge-props":{offset:["10px","5px"]}},null,8,["color","badge","name"])])])]),u(P,{class:"comment_box","safe-area-inset-bottom":"",show:y.value,"onUpdate:show":o[2]||(o[2]=s=>y.value=s),position:"bottom"},{default:Y(()=>[t("div",Ie,[t("div",null,"è¯„è®º "+_(f.value?`å›žå¤ ${f.value}`:""),1),t("div",{class:"left",onClick:R},"å‘å¸ƒ")]),u(F,{"label-align":"top",modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=s=>i.value=s),modelModifiers:{trim:!0},rows:"6",type:"textarea",maxlength:"200",placeholder:"è¯·è¾“å…¥è¯„è®º","show-word-limit":""},null,8,["modelValue"])]),_:1},8,["show"])])}}},Ue=E(je,[["__scopeId","data-v-6802ebcc"]]);export{Ue as default};
